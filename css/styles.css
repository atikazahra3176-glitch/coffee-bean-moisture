* { box-sizing: border-box; }
body { font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin: 0; color: #2d5016; background: #faf7f2; }
.site-header { background: linear-gradient(90deg, #2d5016, #4a7c3d); color: #fff8f3; padding: 20px 16px; box-shadow: 0 4px 18px rgba(45, 80, 22, 0.2); }
.site-header h1 { margin: 0 0 6px 0; font-size: 1.6rem; letter-spacing: -0.5px; color: #fff8f3 }
.subtitle { margin: 0; opacity: 0.95; font-size: 1rem; color: #f5e6d3 }
.container { padding: 16px; max-width:1200px; margin:0 auto; }
.controls { display:flex; gap:12px; align-items:center; margin:12px 0; }
.controls label { font-weight:600; color: #2d5016 }
.controls select { padding:6px 8px; font-size:1rem; background: #fff8f3; border: 2px solid #d4956d; border-radius: 6px; color: #2d5016 }
.controls .note { color:#6b5344; font-size:0.9rem }
/* Buttons */
.control-buttons { display:flex; gap:8px; margin-left:8px }
.btn { background: linear-gradient(90deg, #4a7c3d, #6a9c5d); color: #fff8f3; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; font-weight:600; transition: all 0.2s }
.btn:hover { background: linear-gradient(90deg, #2d5016, #4a7c3d); box-shadow: 0 4px 12px rgba(45, 80, 22, 0.2) }
.btn.ghost { background:transparent; color:#e85d75; border: 2px solid #e85d75 }
.btn.ghost:hover { background: #ffe8f0; }
.btn:active { transform:translateY(1px) }
.cards { display:grid; grid-template-columns: repeat(auto-fit,minmax(160px,1fr)); gap:12px; margin:12px 0; }
.card { background: linear-gradient(180deg, #fff8f3, #f5e6d3); border-radius:12px; padding:14px; box-shadow:0 6px 18px rgba(45, 80, 22, 0.08); border: 1px solid #d4956d }
.card h3 { margin:0 0 8px 0; font-size:0.95rem; color:#2d5016 }
.card .value { font-size:1.7rem; font-weight:800; color:#e85d75 }
.visuals { display:grid; grid-template-columns: 1fr 420px; gap:16px; margin-top:12px; }
.chart-wrap { background:#fff8f3; padding:12px; border-radius:8px; box-shadow:0 6px 18px rgba(45, 80, 22, 0.06); border: 1px solid #d4956d }
.map { height:420px; border-radius:10px; box-shadow:0 6px 18px rgba(45, 80, 22, 0.06); border: 2px solid #4a7c3d; }
.table-wrap { margin-top:18px; background:#fff8f3; padding:12px; border-radius:8px; box-shadow:0 6px 18px rgba(45, 80, 22, 0.06); border-top: 4px solid #4a7c3d }
/* Legend */
.map-legend { position: absolute; right: 18px; top: 18px; background: rgba(255, 248, 243, 0.98); padding:8px 10px; border-radius:8px; box-shadow:0 6px 18px rgba(45, 80, 22, 0.1); font-size:0.85rem; z-index:1000; border: 1px solid #d4956d }
.legend-swatch { width:18px; height:12px; display:inline-block; margin-right:8px; border-radius:2px; vertical-align:middle }

/* Table search */
.table-controls { display:flex; justify-content:space-between; gap:12px; align-items:center; margin-bottom:10px }
.table-controls .search { padding:8px 10px; border-radius:8px; border: 2px solid #d4956d; width:260px; background: #fff8f3; color: #2d5016 }
.table-controls .search::placeholder { color: #a68878 }

/* Table styling */
#dataTable { width:100%; border-collapse:collapse }
#dataTable thead th { text-align:left; padding:8px; font-weight:700; background:linear-gradient(180deg, #e8dcc9, #d4c4b0); color: #2d5016; cursor: pointer }
#dataTable thead th:hover { background: #d4b5a0; }
#dataTable tbody td { padding:8px; border-top:1px solid #e8d4c0; color: #2d5016 }
#dataTable tbody tr:hover { background: #fef4f0 }
.analysis-wrap { margin-top: 18px; background: linear-gradient(180deg, #fff8f3, #f5e6d3); padding: 12px; border-radius: 8px; box-shadow: 0 6px 18px rgba(45, 80, 22, 0.06); border-left: 4px solid #e85d75 }
.analysis-wrap h2 { color: #2d5016 }
@media (max-width:960px) { .visuals { grid-template-columns: 1fr; } .map { height:320px } }
